2026-02-25 17:08:37,517 | INFO | mcp-server | GET /mcp/tools
2026-02-25 17:08:49,951 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:08:49,952 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:08:49,952 | INFO | mcp-server | Gemini router called
2026-02-25 17:08:49,952 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:08:50,190 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 9.713245117s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1803::5f%5D:443 {grpc_status:8, grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\nPlease retry in 9.713245117s."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 9.713245117s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 9
}
]
2026-02-25 17:08:50,196 | INFO | mcp-server | Request completed in 0.243s
2026-02-25 17:09:29,579 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:09:29,579 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:09:29,579 | INFO | mcp-server | Gemini router called
2026-02-25 17:09:29,579 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:09:29,678 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 30.223397941s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1803::5f%5D:443 {grpc_status:8, grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\nPlease retry in 30.223397941s."}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 30.223397941s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 30
}
]
2026-02-25 17:09:29,681 | INFO | mcp-server | Request completed in 0.102s
2026-02-25 17:16:59,535 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:16:59,536 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:16:59,536 | INFO | mcp-server | Gemini router called
2026-02-25 17:16:59,536 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:16:59,735 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 164.543346ms."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1804::5f%5D:443 {grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\nPlease retry in 164.543346ms.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 164.543346ms. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
}
]
2026-02-25 17:16:59,737 | INFO | mcp-server | Request completed in 0.201s
2026-02-25 17:17:02,541 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:17:02,541 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:17:02,542 | INFO | mcp-server | Gemini router called
2026-02-25 17:17:02,542 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:17:02,632 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 57.267680122s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1804::5f%5D:443 {grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\nPlease retry in 57.267680122s.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 57.267680122s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 57
}
]
2026-02-25 17:17:02,633 | INFO | mcp-server | Request completed in 0.092s
2026-02-25 17:17:06,769 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:17:06,769 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:17:06,770 | INFO | mcp-server | Gemini router called
2026-02-25 17:17:06,770 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:17:06,859 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 53.042011181s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1804::5f%5D:443 {grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\nPlease retry in 53.042011181s.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 53.042011181s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 53
}
]
2026-02-25 17:17:06,861 | INFO | mcp-server | Request completed in 0.091s
2026-02-25 17:43:23,521 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:43:23,521 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:43:23,522 | INFO | mcp-server | Gemini router called
2026-02-25 17:43:23,522 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:43:24,383 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 35.556582767s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1804::5f%5D:443 {grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\nPlease retry in 35.556582767s.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
Please retry in 35.556582767s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 35
}
]
2026-02-25 17:43:24,389 | INFO | mcp-server | Request completed in 0.867s
2026-02-25 17:44:13,813 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:44:13,814 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:44:13,814 | INFO | mcp-server | Gemini router called
2026-02-25 17:44:13,814 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:44:13,912 | ERROR | mcp-server | MCP invoke failed
Traceback (most recent call last):
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 149, in error_remapped_callable
    return _StreamingResponseIterator(
        result, prefetch_first_result=prefetch_first
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 71, in __init__
    self._stored_first_result = next(self._wrapped)
                                ~~~~^^^^^^^^^^^^^^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 538, in __next__
    return self._next()
           ~~~~~~~~~~^^
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/grpc/_channel.py", line 956, in _next
    raise self
grpc._channel._MultiThreadedRendezvous: <_MultiThreadedRendezvous of RPC that terminated with:
	status = StatusCode.RESOURCE_EXHAUSTED
	details = "You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 46.027708416s."
	debug_error_string = "UNKNOWN:Error received from peer ipv6:%5B2607:f8b0:4023:1804::5f%5D:443 {grpc_message:"You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro\nPlease retry in 46.027708416s.", grpc_status:8}"
>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 108, in event_stream
    for token in stream_tool_decision(prompt):
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/Users/sangr2/Library/CloudStorage/OneDrive-PegasystemsInc/Documents/Projects/AIProjects/Pega2Gemini/main.py", line 76, in stream_tool_decision
    resp = model.generate_content(system_prompt + "\nUser: " + prompt, stream=True)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/generativeai/generative_models.py", line 325, in generate_content
    iterator = self._client.stream_generate_content(
        request,
        **request_options,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/ai/generativelanguage_v1beta/services/generative_service/client.py", line 1143, in stream_generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/gapic_v1/method.py", line 128, in __call__
    return wrapped_func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
        exc,
    ...<6 lines>...
        timeout,
    )
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_base.py", line 216, in _retry_error_helper
    raise final_exc from source_exc
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/retry/retry_unary.py", line 147, in retry_target
    result = target()
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "/Users/sangr2/Library/Python/3.13/lib/python/site-packages/google/api_core/grpc_helpers.py", line 153, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-3-pro
Please retry in 46.027708416s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerDay-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 46
}
]
2026-02-25 17:44:13,913 | INFO | mcp-server | Request completed in 0.099s
2026-02-25 17:47:19,482 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:47:19,482 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:47:19,485 | INFO | mcp-server | Gemini router called
2026-02-25 17:47:19,485 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:47:20,372 | INFO | mcp-server | Gemini selected tool: eligibility_check
2026-02-25 17:47:20,373 | INFO | mcp-server | Tool executed: eligibility_check in 0.0s
2026-02-25 17:47:20,373 | DEBUG | mcp-server | Tool result: {'eligible': True}
2026-02-25 17:47:20,373 | INFO | mcp-server | Request completed in 0.888s
2026-02-25 17:48:05,041 | INFO | mcp-server | POST /mcp/invoke
2026-02-25 17:48:05,041 | DEBUG | mcp-server | Incoming payload: {'prompt': 'Check applicant eligibility', 'input': {'income': 75000, 'creditScore': 720}}
2026-02-25 17:48:05,041 | INFO | mcp-server | Gemini router called
2026-02-25 17:48:05,041 | DEBUG | mcp-server | Router prompt: Check applicant eligibility
2026-02-25 17:48:05,852 | INFO | mcp-server | Gemini selected tool: eligibility_check
2026-02-25 17:48:05,853 | INFO | mcp-server | Tool executed: eligibility_check in 0.0s
2026-02-25 17:48:05,853 | DEBUG | mcp-server | Tool result: {'eligible': True}
2026-02-25 17:48:05,853 | INFO | mcp-server | Request completed in 0.812s
2026-02-25 18:02:13,924 | INFO | mcp-server | GET /mcp/tools
